<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>EzSwitchComp</title>
  <script src="../lib/react.js"></script>
	<script src="../lib/react-dom.js"></script>
	<script src="../lib/JSXTransformer.js"></script>
</head>
<body>
	<div id="content"></div>
	<!-- 任务 假设示例中的开关的寿命只有5次，
	切换5次后就坏了，之后的点击不再切换并弹出警告框提示用户。
	请修改示例代码实现这个需求！-->
	<!-- 任务完成 -->
	<script type="text/jsx">
		//组件定义
		var EzSwitchComp = React.createClass({
			//设置初始状态
			getInitialState : function(){
				return {on : false,time: 0};// 必须返回一个对象
			},
			//处理点击事件，切换状态
			onClick : function(){
				if(this.state.time<5){
					++this.state.time;
					// 读取并重设状态，这将触发重新渲染
					this.setState({on : !this.state.on,time: this.state.time});
				}else{
					alert('开关坏了')
				}
			},
			render : function(){
				//根据状态设置样式
				img = this.state.on ? "../img/switch-on.png" : img = "../img/switch-off.png";

				//返回元素
				return <img src = {img} style={{width:"150px"}} onClick={this.onClick}/>;
			}
		});
		//渲染
		React.render(<EzSwitchComp/>, document.querySelector("#content"));
	</script>
</body>
</html>
